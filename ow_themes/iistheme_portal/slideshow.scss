$number_of_slides: 5;
$duration_of_one_slide: 5;
$total_duration: $number_of_slides * $duration_of_one_slide;
$keyframes_per_second: 100 / $total_duration;

$pb: $duration_of_one_slide * $keyframes_per_second;
$pb1: 0;
$pb2: $keyframes_per_second;
$pb3: $keyframes_per_second * ($duration_of_one_slide - 1);
$pb4: $pb3 + 1;
$pb5: $pb4 + 1;

@for $i from 1 through $number_of_slides
{
	.st_slide#{$i}
	{
		animation: fade#{$i} #{$total_duration}s infinite;
		-webkit-animation: fade#{$i} #{$total_duration}s infinite;
		
		@if $i == 1
		{
			z-index: 1;
			visibility: visible;
		}
		@else
		{
			z-index: 0;
			visibility: hidden;
		}
	}
	
	@keyframes fade#{$i}
	{
		$lower_bound_for_1: $keyframes_per_second * $duration_of_one_slide * ($i - 1);
		$upper_bound_for_1: $lower_bound_for_1 + ($keyframes_per_second * ($duration_of_one_slide - 1));
		
		$j: 0;
		
		@while $j <= 100
		{
			@if $j >= $lower_bound_for_1 and $j <= $upper_bound_for_1
			{
				#{$j}% { opacity: 1; z-index: 1; visibility: visible; }
			}
			@else
			{
				@if $i == 1 and $j == 100
				{
					#{$j}% { opacity: 1; z-index: 1; visibility: visible; }
				}
				@else
				{
					#{$j}% { opacity: 0; z-index: 0; visibility: hidden; }
				}
			}
			$j: $j + $keyframes_per_second;
		}
	}
}

@keyframes fullexpand {
   /* In these keyframes, the progress-bar is stationary */
   $j: 0;
   @while $j <= 100
   {
   		#{$pb1 + $j}% { width: 0%; opacity: 0; }
		$j: $j + $pb;
   }

   /* In these keyframes, the progress-bar starts to come alive */
   $j: 0;
   @while $j < 100
   {
		#{$pb2 + $j}% { width: 0%; opacity: 0.3; }
		$j: $j + $pb;
   }

   /* In these keyframes, the progress-bar moves forward for 3 seconds */
   $j: 0;
   @while $j < 100
   {
		#{$pb3 + $j}% { width: 100%; opacity: 0.7; }
		$j: $j + $pb;
   }

   /* In these keyframes, the progress-bar has finished his path */
   $j: 0;
   @while $j < 100
   {
		#{$pb4 + $j}% { width: 100%; opacity: 0.3; }
		$j: $j + $pb;
   }

   /* In these keyframes, the progress-bar will disappear and then resume the cycle */
   $j: 0;
   @while $j < 100
   {
		#{$pb5 + $j}% { width: 100%; opacity: 0; }
		$j: $j + $pb;
   }
}

.st_progress_bar { position: relative; top: 330px; width: 680px; height: 5px; background: #000; animation: fullexpand #{$total_duration}s ease-out infinite; border-radius: 2px; }
.st_slider { height: 320px; margin: 10px auto; position: relative; background-color: #f3f3f3; border-radius: 6px; padding: 20px 5px 20px 5px; }
.st_slider_item { position: absolute; width: 100%; height: 100%; }
.st_slider_item_content { display: table-cell; width: 60%; vertical-align: middle; padding: 0px 20px 0px 20px; }
.st_slider_item_title { font-size: 20px; color: #ED3237; margin: 10px 0px 20px 0px; line-height: 30px; }
.st_slider_item_text { color: #5a5a5a; text-align: justify; margin: 0px 0px 0px 0px; line-height: 23px; font-size: 13px; }
a.st_slider_item_button { margin: 30px 0px 0px 10px; display: block; float: right; }
.st_slider_item_image_container { display: table-cell; width: 40%; vertical-align: middle; text-align: center; padding: 0px 15px 0px 15px; }
.st_slider_item_image_container img { max-height: 100%; max-width: 100%; margin: 0px auto; }
.st_slider:hover div.st_slider_item, .st_slider:hover .st_progress_bar { -moz-animation-play-state:paused; -webkit-animation-play-state:paused; }